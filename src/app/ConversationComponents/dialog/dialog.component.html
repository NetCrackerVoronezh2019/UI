<body>
  <app-navbar></app-navbar>
 <div id="sidebar">
   <p><mark>{{dialog?.name}}</mark></p>
   <div *ngIf="!userSearchPanelVisible">
   <button mat-raised-button class="ml-2" *ngIf="dialog?.type=='public'" (click)="openUserAddForm()"><i class="fas fa-plus-circle"></i>Добавить пользователя</button>
   <button mat-raised-button class="ml-2" *ngIf="dialog?.type=='public'" (click)="liveDialog()"><i class="fas fa-minus-circle"></i>Покинуть диалог</button>
   <div *ngIf="dialog?.creatorId == user?.userId">
     <button mat-raised-button class="ml-2" *ngIf="dialog?.type=='public'" (click)="deleteDialog()"><i class="fas fa-minus-circle"></i>Удалить диалог</button>
   </div>
   Участники:
   <div *ngFor ='let user of dialogMembers'>
     <app-dialog-member-card [(us)]="user"></app-dialog-member-card>
   </div>
   </div>
   <div *ngIf="userSearchPanelVisible">
     <form [formGroup]="dgService.getUserSearchForm()">
       <h5>Поиск</h5>
       <label for="">Имя</label>
       <input type="text" class="form-control" formControlName="firstName" autocomplete="off" placeholder="first name">
       <div *ngIf="dgService.getUserSearchForm().controls['firstName'].invalid && dgService.getUserSearchForm().controls['firstName'].touched" >
         <small  *ngIf="dgService.getUserSearchForm().controls['firstName'].errors.minlength">name is too short</small>
         <small  *ngIf="dgService.getUserSearchForm().controls['firstName'].errors.maxlength">name is too long</small>
       </div>
       <label for="">Фамилия</label>
       <input type="text" class="form-control" formControlName="lastName" autocomplete="off" placeholder="last name">
       <div *ngIf="dgService.getUserSearchForm().controls['lastName'].invalid && dgService.getUserSearchForm().controls['lastName'].touched" >
         <small  *ngIf="dgService.getUserSearchForm().controls['lastName'].errors.minlength">name is too short</small>
         <small  *ngIf="dgService.getUserSearchForm().controls['lastName'].errors.maxlength">name is too long</small>
       </div>
     </form>
     <button mat-raised-button class="ml-2" (click)="search()"><i class="fas fa-search"></i>Поиск</button>
     <button mat-raised-button class="ml-2" (click)="closeUserAddForm()"><i class="fas fa-minus-circle"></i>Отмена</button>
   <div *ngFor ='let us of users' align="center">
     <app-user-card [(us)]="us" *ngIf="user.userId != us.userId" (click)="invite(us)"></app-user-card>
   </div>
  </div>
 </div>
 <div id="Sending">
   <form class="mt-5" [formGroup]="dgService.getMessageForm()">
     <div class="container">
       <div class="form-group">
         <textarea id="message" placeholder="Write your message" type="text" class="form-control" formControlName="text" [(ngModel)]="textbox"></textarea>
         <button class="btn btn-light btn-primary-spacing" (click)="sendMessage()">Send</button>
       </div>
    </div>
   </form>
 </div>
 <div id="content" #scrollMe [scrollTop]="scrollMe.scrollHeight">
       <ul *ngFor ='let message of messages'>
         <div *ngIf="message.sender.userId == user.userId; then thisUserMessage else enatherUserMessage"></div>
              <ng-template #thisUserMessage>
                <div align="right">
                  <app-message-card [(message)]="message"></app-message-card>
                </div>
              </ng-template>
              <ng-template #enatherUserMessage>
                <div align="left">
                  <app-message-card [(message)]="message"></app-message-card>
                </div>
            </ng-template>
       </ul>
 </div>
</body>
