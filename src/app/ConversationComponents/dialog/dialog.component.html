<body>
  <app-navbar></app-navbar>
 <div id="sidebar">
   <p><mark>{{dialog?.name}}</mark></p>
   <a mat-raised-button class="ml-2" (click)="openUserAddForm()"><i class="fas fa-plus-circle"></i>Добавить пользователя</a>
   <p></p>
   <a mat-raised-button class="ml-2" (click)="liveDialog()"><i class="fas fa-minus-circle"></i>Покинуть диалог</a>
   <div *ngIf="dialog?.creatorId == user?.userId">
     <p></p>
     <a mat-raised-button class="ml-2" (click)="deleteDialog()"><i class="fas fa-minus-circle"></i>Удалить диалог</a>
   </div>
   <p></p>
   Участники:
   <p></p>
   <div *ngFor ='let user of dialogMembers'>
     <app-dialog-member-card [(us)]="user"></app-dialog-member-card>
   </div>
 </div>
 <div id="Sending">
   <form class="mt-5" [formGroup]="dgService.getMessageForm()">
     <div class="container">
       <div class="form-group">
         <textarea id="message" placeholder="Write your message" type="text" class="form-control" formControlName="text" [(ngModel)]="textbox"></textarea>
         <button class="btn btn-light btn-primary-spacing" (click)="sendMessage()">Send</button>
       </div>
    </div>
   </form>
 </div>
 <div id="content" #scrollMe [scrollTop]="scrollMe.scrollHeight">
       <ul *ngFor ='let message of messages'>
         <div *ngIf="message.sender.userId == user.userId; then thisUserMessage else enatherUserMessage"></div>
              <ng-template #thisUserMessage>
                <div align="right">
                  <app-message-card [(message)]="message" routerLink="/dialog/{{dialog.dialogId}}"></app-message-card>
                </div>
              </ng-template>
              <ng-template #enatherUserMessage>
                <div align="left">
                  <app-message-card [(message)]="message" routerLink="/dialog/{{dialog.dialogId}}"></app-message-card>
                </div>
            </ng-template>
       </ul>
 </div>
 <div class="blog-card" *ngIf="addUserVisible">
   <div class="inner-part">
     <form [formGroup]="dgService.getAddUserForm()" class="mt-5">
       <h1>Add user</h1>
         <div class="form-group">
           <label for="">User name</label>
           <input id="Name" type="text" class="form-control" formControlName="userName" placeholder="Username" autocomplete="off" [(ngModel)]="newUserName">
           <div *ngIf="dgService.getAddUserForm().controls['userName'].invalid && dgService.getAddUserForm().controls['userName'].touched" >
             <small class="form-text text-muted" *ngIf="dgService.getAddUserForm().controls['userName'].errors.minlength">name is too short</small>
             <small  class="form-text text-muted" *ngIf="dgService.getAddUserForm().controls['userName'].errors.maxlength">name is too long</small>
           </div>
         </div>
     </form>
     <button class="btn btn-light btn-primary-spacing" (click)="invite()">Invite</button>
     <button class="btn btn-dark btn-primary-spacing" (click)="closeUserAddForm()">Cancel</button>
   </div>
 </div>
</body>
