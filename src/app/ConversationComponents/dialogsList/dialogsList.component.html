 <body>
  <app-navbar></app-navbar>
  <div id="sidebar">
        <button *ngIf="type == 'all' || type == 'public'" mat-raised-button class="ml-2" (click)="openDialogform()"><i class="fas fa-plus-circle"></i> Создать диалог</button>
        <button *ngIf="type == 'private' && !userSearchPanelVisible" mat-raised-button class="ml-2" (click)="openUserSearchPanel()"><i class="fas fa-plus-circle"></i> Написать пользователю</button>
        <button mat-raised-button class="ml-2" (click)="showDialogList()" ><i class="fa fa-comments"></i> Все диалоги</button>
        <button mat-raised-button class="ml-2" (click)="showDialogListByType('public')" ><i class="fa fa-beer"></i> Общие диалоги</button>
        <button mat-raised-button class="ml-2" (click)="showDialogListByType('private')"><i class="fa fa-user-circle"></i> Личные диалоги</button>
        <button mat-raised-button class="ml-2" (click)="showDialogListByType('group')"><i class="fa fa-users"></i> Диалоги групп</button>
        <button mat-raised-button class="ml-2" (click)="showDialogListByType('advertisement')"><i class="fa fa-handshake"></i> Диалоги объявлений</button>
        <div *ngIf="type == 'private' && userSearchPanelVisible">
          <form [formGroup]="dgService.getUserSearchForm()">
            <h5>Поиск</h5>
            <label for="">Имя</label>
            <input type="text" class="form-control" formControlName="firstName" autocomplete="off" placeholder="first name">
            <div *ngIf="dgService.getUserSearchForm().controls['firstName'].invalid && dgService.getUserSearchForm().controls['firstName'].touched" >
              <small  *ngIf="dgService.getUserSearchForm().controls['firstName'].errors.minlength">name is too short</small>
              <small  *ngIf="dgService.getUserSearchForm().controls['firstName'].errors.maxlength">name is too long</small>
            </div>
            <label for="">Фамилия</label>
            <input type="text" class="form-control" formControlName="lastName" autocomplete="off" placeholder="last name">
            <div *ngIf="dgService.getUserSearchForm().controls['lastName'].invalid && dgService.getUserSearchForm().controls['lastName'].touched" >
              <small  *ngIf="dgService.getUserSearchForm().controls['lastName'].errors.minlength">name is too short</small>
              <small  *ngIf="dgService.getUserSearchForm().controls['lastName'].errors.maxlength">name is too long</small>
            </div>
          </form>
          <button mat-raised-button class="ml-2" (click)="search()"><i class="fas fa-search"></i>Поиск</button>
          <button mat-raised-button class="ml-2" (click)="cancelSearch()"><i class="fas fa-minus-circle"></i>Отмена</button>
        <div *ngFor ='let us of users' align="center">
          <app-user-card [(us)]="us" *ngIf="user.userId != us.userId" (click)="startDialogWithUser(us.userId)"></app-user-card>
        </div>
       </div>
  </div>
  <div id="content">
    <div class="container">
        <ul *ngFor ='let dialog of dialogs'>
          <app-dialog-card [(dg)]="dialog" [(userId)]="user.userId"></app-dialog-card>
        </ul>
    </div>
  </div>
  <div class="blog-card" *ngIf="creationDialogVisible">
    <div class="inner-part">
      <form [formGroup]="dgService.getDialogCreationForm()" class="mt-5">
        <h1>Create Dialog</h1>
          <div class="form-group">
            <label for="">Dialog name</label>
            <input id="Name" type="text" class="form-control" formControlName="dialogName" autocomplete="off" placeholder="Dialog name" [(ngModel)]="newMessage">
            <div *ngIf="dgService.getDialogCreationForm().controls['dialogName'].invalid && dgService.getDialogCreationForm().controls['dialogName'].touched" >
              <small class="form-text text-muted" *ngIf="dgService.getDialogCreationForm().controls['dialogName'].errors.minlength">name is too short</small>
              <small  class="form-text text-muted" *ngIf="dgService.getDialogCreationForm().controls['dialogName'].errors.maxlength">name is too long</small>
            </div>
          </div>
          <input type="file" name="file" id="file"  (change)="handleFileInput($event.target.files)" multiple accept="image/*" class="input-file"/>
          <label for="file" class="btn btn-tertiary js-labelFile">
          </label>
      </form>
      <button class="btn btn-light btn-primary-spacing" (click)="createDialog()">Create</button>
      <button class="btn btn-dark btn-primary-spacing" (click)="closeDialogForm()">Cancel</button>
    </div>
  </div>
 </body>
